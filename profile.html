<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>E-Cart | Profile</title>

<style>
body {
  font-family: Arial;
  background: #f4f4f4;
  margin: 0;
}

header {
  background: #1f2937;
  color: white;
  padding: 15px;
  text-align: center;
}

.profile-container {
  background: white;
  width: 400px;
  margin: 30px auto;
  padding: 20px;
  border-radius: 8px;
}

.profile-pic {
  text-align: center;
}

.profile-pic img {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  object-fit: cover;
}

input {
  width: 100%;
  padding: 7px;
  margin: 6px 0;
}

button {
  padding: 8px;
  width: 100%;
  border: none;
  margin-top: 8px;
  cursor: pointer;
}

.save-btn { background: #3b82f6; color: white; }
.logout-btn { background: #ef4444; color: white; }
.order-box {
  background: #f9fafb;
  padding: 10px;
  margin-top: 10px;
  border-radius: 6px;
}
</style>
</head>

<body>

<header>
  <h2>My Profile</h2>
</header>

<div class="profile-container">

  <!-- PROFILE IMAGE -->
  <div class="profile-pic">
    <img id="profileImg" src="images/default.png">
    <input type="file" onchange="uploadImage(event)">
  </div>

  <!-- USER DETAILS -->
  <h3>Edit Profile</h3>
  <input type="text" id="name">
  <input type="email" id="email">
  <button class="save-btn" onclick="saveProfile()">Save Profile</button>

  <!-- PASSWORD -->
  <h3>Change Password</h3>
  <input type="password" id="newPass" placeholder="New Password">
  <button class="save-btn" onclick="changePassword()">Change Password</button>


  <!-- LOGOUT -->
  <button class="logout-btn" onclick="logout()">Logout</button>

</div>

<script>
// ðŸ”’ login check
if (!localStorage.getItem("isLoggedIn")) {
  window.location.href = "login.html";
}

// load user
let user = JSON.parse(localStorage.getItem("user"));
document.getElementById("name").value = user.name;
document.getElementById("email").value = user.email;

// save profile
function saveProfile() {
  user.name = document.getElementById("name").value;
  user.email = document.getElementById("email").value;
  localStorage.setItem("user", JSON.stringify(user));
  alert("Profile updated");
}

// change password
function changePassword() {
  let pass = document.getElementById("newPass").value;
  if (!pass) {
    alert("Enter new password");
    return;
  }
  user.pass = pass;
  localStorage.setItem("user", JSON.stringify(user));
  alert("Password changed");
}

// image upload
function uploadImage(e) {
  let reader = new FileReader();
  reader.onload = function () {
    localStorage.setItem("profileImg", reader.result);
    document.getElementById("profileImg").src = reader.result;
  };
  reader.readAsDataURL(e.target.files[0]);
}

// load image
let savedImg = localStorage.getItem("profileImg");
if (savedImg) document.getElementById("profileImg").src = savedImg;

// logout
function logout() {
  localStorage.removeItem("isLoggedIn");
  window.location.href = "login.html";
}
</script>

</body>
</html>
